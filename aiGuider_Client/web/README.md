# aiGuider Web客户端

这是AR智能导游眼镜系统的临时Web前端应用，主要用于调试后端AI功能。应用提供简洁直观的用户界面，允许开发人员与后端AI服务进行交互测试。

## 功能特性

- **AI对话界面**：实现与后端AI服务的实时对话，支持多轮对话历史显示
- **多模态输入**：支持上传图片进行视觉分析
- **系统状态监控**：显示API请求状态、响应时间和错误信息
- **实时消息推送**：通过轮询接收后端主动推送的消息
- **会话管理**：支持创建和维护AI应用会话，通过会话ID保持上下文连续性
- **对话历史**：自动保存和加载对话历史，支持清除历史记录

## 技术规格

- **前端技术**：纯HTML/CSS/JavaScript实现，不依赖复杂框架
- **通信方式**：使用标准Fetch API实现异步通信
- **存储机制**：使用localStorage保存对话历史和会话ID
- **会话机制**：使用X-Session-ID请求头传递会话ID

## 快速开始

1. 确保后端服务已启动
2. 在当前目录运行以下命令启动Web服务器：

```bash
# 使用Python内置HTTP服务器（端口8080）
python -m http.server 8080
```

3. 在浏览器中访问 `http://localhost:8080`
4. 在控制面板中设置正确的后端服务地址，默认为 `http://localhost:8000/api/v1`
5. 点击"测试连接"按钮验证与后端的连接状态

## API接口

Web客户端与后端通信的API端点：

- `GET /api/v1/health` - 健康检查接口
- `POST /api/v1/session/create` - 创建新会话
- `POST /api/v1/chat` - 发送消息（支持文本和图片）及对话历史
- `GET /api/v1/messages` - 获取后端主动推送的消息

## 通信流程

1. **初始化**：
   - 应用启动时尝试从localStorage加载会话ID和对话历史
   - 如果没有会话ID，则调用`/session/create`创建新会话
   - 开始轮询`/messages`获取主动消息

2. **发送消息**：
   - 调用`/chat`端点发送用户消息和图片
   - 将会话ID添加到请求头中(`X-Session-ID`)
   - 将完整对话历史作为请求参数发送
   - 接收AI回复并显示在界面上
   - 更新本地存储的对话历史

3. **接收主动消息**：
   - 定期轮询`/messages`端点
   - 显示AI主动发送的消息
   - 更新对话历史记录
   - 如果会话失效，自动创建新会话

## 浏览器兼容性

- Chrome 80+
- Firefox 75+
- Edge 80+
- 不支持Internet Explorer

## 目录结构

```
aiGuider_Client/web/
├── index.html     # 主HTML文件
├── styles.css     # 样式表
├── script.js      # JavaScript代码
└── README.md      # 说明文档
```

## 调试提示

- 控制台中可以看到API请求的详细信息和轮询日志
- 错误信息会在界面中显示5秒后自动隐藏
- 对话历史和会话ID会保存在浏览器本地存储中
- 会话ID会在页面刷新或重新打开后保持，除非清除本地存储
- 可以通过"清除对话"按钮重置对话历史 